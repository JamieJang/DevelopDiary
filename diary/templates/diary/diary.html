{% extends 'diary/base.html' %}
{% load staticfiles %}
{% load humanize %}

{% block title %} 개발일지 {% endblock %}

{% block style %}
<link rel='stylesheet' href="{% static 'css/post.css' %}" />
{% endblock %}

{% block content %}
    {% if user.is_superuser %}
    <div id="new-post-btn">
        <span class="fas fa-plus" data-toggle="modal" data-target="#form-modal"></span>
        <a href="{% url 'diary:note' %}">
            <span class="fas fa-exchange-alt"></span>
        </a>
    </div>
    {% endif %}

    <div style="margin:15px; color:#b3cde0; border-bottom:1px solid #b3cde0;">
        <h2>개발일지</h2>
    </div>

    {% if diarys %}
    <div class="post-list">
        {% for diary in diarys %}
        <div class="each-post" onclick="show_detail('{{ diary.id }}')">
            <div class="post-title">
                {{ diary.title }}
            </div>
            <div class="post-date">
                <p class="create">Created  {{ diary.created_at | date:"Y/m/d H:i" }}</p>
                <p class="update">Updated {{ diary.updated_at | date:"Y/m/d H:i" }}</p>
            </div>

        </div>
        {% endfor %}
    </div>
    </div>
    {% else %}
    <div class="no-data-msg">
        작성된 일지가 없습니다.
    </div>
    {% endif %}
    {% include 'diary/modals.html' %}
{% endblock %}

{% block script %}
<script>
    var show_detail = (pk) => {
        window.location.href = '/diary/detail/'+pk;
    }
</script>
{% endblock %}
